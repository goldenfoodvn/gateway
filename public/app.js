async function call(path, options){ try{ const r = await fetch(path, options); const t = await r.text(); try{return JSON.stringify(JSON.parse(t), null,2)}catch(e){return t} }catch(e){return "ERROR: "+e.message}}
document.getElementById("btn-health").onclick = async ()=>{ document.getElementById("health-res").textContent="..."; document.getElementById("health-res").textContent = await call("/health") }
document.getElementById("btn-me").onclick = async ()=>{ const token=document.getElementById("token-input").value; document.getElementById("me-res").textContent="..."; document.getElementById("me-res").textContent = await call("/me",{headers:{"Authorization": token?`Bearer ${token}`:""}}) }
document.getElementById("btn-webhook").onclick = async ()=>{ const p=document.getElementById("idpProvider").value; const u=document.getElementById("idpUserId").value; document.getElementById("webhook-res").textContent="..."; document.getElementById("webhook-res").textContent = await call("/platform/auth/webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idpProvider:p,idpUserId:u})}) }
